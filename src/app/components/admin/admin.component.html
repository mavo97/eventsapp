<div class="container mt-2">

    <div class="row mb-2">
        <div class="col text-center">
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#crearEvento">
                Crear Evento
            </button>
        </div>
    </div>

    <!-- Tabla Eventos -->
    <h2>Eventos</h2>
    <table class="table table-striped">
        <thead>
            <tr>
                <th scope="col">ID</th>
                <th scope="col">Nombre</th>
                <th scope="col">Fecha Inicio</th>
                <th scope="col">Fecha Fin</th>
                <th scope="col">Status</th>
                <th scope="col">Editar</th>
                <th scope="col">Eliminar</th>
            </tr>
        </thead>
        <tbody *ngFor="let evento of eventsarray let i = index;">
            <tr>
                <th scope="row ">{{ evento.id_evento }}</th>
                <td>{{ evento.nombre }}</td>
                <td>{{ evento.fecha_inicio }}</td>
                <td>{{ evento.fecha_fin }}</td>
                <ng-container *ngIf="evento.estado === '1'; else elseTemplate">
                    <td><span class="badge badge-success">Activo</span></td>
                </ng-container>
                <ng-template #elseTemplate>
                    <td><span class="badge badge-danger">Inactivo</span></td>
                </ng-template>
                <td><a href="#"><i class="fas fa-edit"></i></a></td>
                <td><a href="#"><i class="fas fa-trash"></i></a></td>
            </tr>
        </tbody>
    </table>
</div>




<!-- Modal Evento -->
<div class="modal fade" id="crearEvento" tabindex="-1 " role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content ">
            <div class="modal-header ">
                <h5 class="modal-title " id="exampleModalLabel">Crear Evento</h5>
                <button type="button " class="close " data-dismiss="modal " aria-label="Close ">
            <span aria-hidden="true ">&times;</span>
          </button>
            </div>
            <div class="modal-body ">

                <!---------------------Form------------------------------------------>
                <form (ngSubmit)="guardarEvento() " [formGroup]="forma ">

                    <div class="form-group">
                        <label for="nombre">Nombre</label>
                        <input type="text" formControlName="nombre" class="form-control" id="nombre" aria-describedby="text" placeholder="Nombre Del Evento">
                        <div *ngIf="forma.controls['nombre'].errors?.required && forma.controls['nombre'].dirty " class="form-control-feedback">
                            <p style="color: red ">*Nombre campo requerido.</p>
                        </div>
                        <div *ngIf="forma.controls['nombre'].errors?.minlength && forma.controls['nombre'].dirty " class="form-control-feedback">
                            <p style="color: red ">*Minimo 3 caracteres.</p>
                        </div>
                    </div>

                    <div class="form-group mb-0" formGroupName="fecha_inicio">
                        <label>Fecha Inicio</label>
                    </div>

                    <div class="row " formGroupName="fecha_inicio">
                        <div class="col">
                            <select class="custom-select" id="dia" formControlName="dia">
                                <option *ngFor="let day of diass" value="{{day.value}}">{{day.value}}</option>
                            </select>
                            <label for="dia">Día</label>
                            <div *ngIf="forma.controls['fecha_inicio'].controls['dia'].errors?.required && (forma.dirty && forma.touched)" class="form-control-feedback">
                                <p style="color: red ">*Día campo requerido.</p>
                            </div>
                        </div>
                        <div class="col">
                            <select class="custom-select" id="mes" formControlName="mes">
                                <option *ngFor="let mes of mesess" value="{{mes.value2}}">{{mes.value}}</option>
                            </select>
                            <label for="mes">Mes</label>
                            <div *ngIf="forma.controls['fecha_inicio'].controls['mes'].errors?.required && (forma.dirty && forma.touched) " class="form-control-feedback ">
                                <p style="color: red ">*Mes campo requerido.</p>
                            </div>
                        </div>
                        <div class="col">
                            <input type="text" formControlName="year" id="year" class="form-control " placeholder="Ej: 2019 " pattern="^[0-9]+">
                            <label for="year ">Año</label>
                            <div *ngIf="forma.controls['fecha_inicio'].controls['year'].errors?.required && (forma.dirty && forma.touched)" class="form-control-feedback">
                                <p style="color: red ">*Año campo requerido.</p>
                            </div>
                            <div *ngIf="forma.controls['fecha_inicio'].controls['year'].errors?.maxlength && forma.controls['fecha_inicio'].controls['year'].dirty" class="form-control-feedback">
                                <p style="color: red ">*Maximo 4 digitos.</p>
                            </div>
                            <div *ngIf="forma.controls['fecha_inicio'].controls['year'].errors?.minlength && forma.controls['fecha_inicio'].controls['year'].dirty" class="form-control-feedback">
                                <p style="color: red ">*Minimo 4 digitos.</p>
                            </div>
                            <div *ngIf="forma.controls['fecha_inicio'].controls['year'].errors?.pattern && forma.controls['fecha_inicio'].controls['year'].dirty" class="form-control-feedback">
                                <p style="color: red ">*Solo se permiten digitos.</p>
                            </div>
                        </div>
                    </div>

                    <div class="form-group mb-0">
                        <label>Fecha Fin</label>
                    </div>

                    <div class="row" formGroupName="fecha_fin">
                        <div class="col ">
                            <select class="custom-select" formControlName="diaf" id="diaf">
                                <option *ngFor="let day of diass" value="{{day.value}}">{{day.value}}</option>
                            </select>
                            <label for="diaf">Día</label>
                            <div *ngIf="forma.controls['fecha_fin'].controls['diaf'].errors?.required && (forma.dirty && forma.touched)" class="form-control-feedback">
                                <p style="color: red ">*Día campo requerido.</p>
                            </div>
                        </div>
                        <div class="col">
                            <select class="custom-select " id="mesf" formControlName="mesf">
                                <option *ngFor="let mes of mesess" value="{{mes.value2}}">{{mes.value}}</option>
                            </select>
                            <label for="mesf">Mes</label>
                            <div *ngIf="forma.controls['fecha_fin'].controls['mesf'].errors?.required && (forma.dirty && forma.touched)" class="form-control-feedback">
                                <p style="color: red ">*Mes campo requerido.</p>
                            </div>
                        </div>
                        <div class="col">
                            <input type="text" id="yearf" formControlName="yearf" class="form-control" placeholder="Ej: 2019" pattern="^[0-9]+">
                            <label for="yearf">Año</label>
                            <div *ngIf="forma.controls['fecha_fin'].controls['yearf'].errors?.required && (forma.dirty && forma.touched)" class="form-control-feedback">
                                <p style="color: red ">*Año campo requerido.</p>
                            </div>
                            <div *ngIf="forma.controls['fecha_fin'].controls['yearf'].errors?.maxlength && forma.controls['fecha_fin'].controls['yearf'].dirty" class="form-control-feedback ">
                                <p style="color: red ">*Maximo 4 digitos.</p>
                            </div>
                            <div *ngIf="forma.controls['fecha_fin'].controls['yearf'].errors?.minlength && forma.controls['fecha_fin'].controls['yearf'].dirty" class="form-control-feedback ">
                                <p style="color: red ">*Minimo 4 digitos.</p>
                            </div>
                            <div *ngIf="forma.controls['fecha_fin'].controls['yearf'].errors?.pattern && forma.controls['fecha_fin'].controls['yearf'].dirty" class="form-control-feedback ">
                                <p style="color: red ">*Solo se permiten digitos.</p>
                            </div>

                        </div>
                    </div>
                    <div class="form-group ">
                        <label for="ubicacion">Ubicación</label>
                        <input type="text " class="form-control " formControlName="ubicacion" id="ubicacion" aria-describedby="text " placeholder="Ubicación">
                        <div *ngIf="forma.controls['ubicacion'].errors?.required && forma.controls['ubicacion'].dirty " class="form-control-feedback ">
                            <p style="color: red ">*Ubicación campo requerido.</p>
                        </div>
                        <div *ngIf="forma.controls['ubicacion'].errors?.maxlength && forma.controls['ubicacion'].dirty " class="form-control-feedback ">
                            <p style="color: red ">*Maximo 30 caracteres.</p>
                        </div>
                    </div>
                    <div class="row ">
                        <div class="col ">
                            <label for="costo">Costo</label>
                            <input type="text" class="form-control" pattern="^[0-9]+" formControlName="costo" id="costo" aria-describedby="number" placeholder="Costo">
                            <div *ngIf="forma.controls['costo'].errors?.required && forma.controls['costo'].dirty " class="form-control-feedback ">
                                <p style="color: red ">*Costo campo requerido.</p>
                            </div>
                            <div *ngIf="forma.controls['costo'].errors?.maxlength && forma.controls['costo'].dirty" class="form-control-feedback ">
                                <p style="color: red ">*Maximo 5 digitos.</p>
                            </div>
                            <div *ngIf="forma.controls['costo'].errors?.pattern && forma.controls['costo'].dirty" class="form-control-feedback ">
                                <p style="color: red ">*Solo se permiten digitos.</p>
                            </div>
                            <div *ngIf="forma.controls['costo'].errors?.noCeros && forma.controls['costo'].dirty" class="form-control-feedback ">
                                <p style="color: red ">*No se puede poner 0 como valor.</p>
                            </div>
                        </div>
                        <div class="col ">
                            <p class="mb-0 ">Status</p>
                            <select class="custom-select" formControlName="status" id="status">
                                <option value="true ">Activo</option>
                                <option value="false ">Inactivo</option>
                            </select>
                            <div *ngIf="forma.controls['status'].errors?.required && (forma.dirty && forma.touched)" class="form-control-feedback ">
                                <p style="color: red ">*Status campo requerido.</p>
                            </div>
                        </div>
                    </div>
                    <div class="form-group ">
                        <label for="descripcion">Descripción</label>
                        <textarea class="form-control " id="descripcion" formControlName="descripcion" rows="2 "></textarea>
                        <div *ngIf="forma.controls['descripcion'].errors?.required && forma.controls['descripcion'].dirty " class="form-control-feedback">
                            <p style="color: red ">*Descripción campo requerido.</p>
                        </div>
                        <div *ngIf="forma.controls['descripcion'].errors?.maxlength && forma.controls['descripcion'].dirty " class="form-control-feedback">
                            <p style="color: red ">*Maximo 200 caracteres.</p>
                        </div>
                    </div>

                    <button type="submit" [disabled]="!forma.valid" class="btn btn-primary">Submit</button>
                </form>
                <!---------------------Form------------------------------------------>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>